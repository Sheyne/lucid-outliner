<html>

<body>
    <script>
        let tokenClient;
        let accessToken = null;
        let pickerInited = false;
        let gisInited = false;

        // Use the API Loader script to load google.picker
        function onApiLoad() {
            console.log("onApiLoad")
            gapi.load('picker', onPickerApiLoad);
        }

        function onPickerApiLoad() {
            pickerInited = true;
        }

        function gisLoaded() {
            // TODO(developer): Replace with your client ID and required scopes.
            tokenClient = google.accounts.oauth2.initTokenClient({
                client_id: 'this_client_id',
                scope: 'SCOPES',
                callback: '', // defined later
            });
            gisInited = true;
            console.log("gisLoaded")
        }

        const googleScript = document.createElement("script");
        googleScript.src = "https://apis.google.com/js/api.js";
        googleScript.async = true;
        googleScript.onload = onApiLoad;
        document.body.appendChild(googleScript);
        const accountScript = document.createElement("script");
        accountScript.src = "https://accounts.google.com/gsi/client";
        accountScript.async = true;
        accountScript.onload = gisLoaded;
        document.body.appendChild(accountScript);
    </script>
</body>

</html>